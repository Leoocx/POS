<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.collections.FXCollections?>
<?import javafx.util.Callback?>

<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.system.pos.pos.view.CaixaView">
   <padding>
      <Insets top="10" right="10" bottom="10" left="10"/>
   </padding>

   <HBox spacing="10" alignment="CENTER_LEFT">
      <Label text="Vendedor:" style="-fx-font-weight: bold;"/>
      <Label fx:id="lblVendedor" style="-fx-font-weight: bold;"/>
      <Label text="Caixa:" style="-fx-font-weight: bold;"/>
      <Label fx:id="lblNumeroCaixa" style="-fx-font-weight: bold;"/>
   </HBox>

   <Separator/>

   <HBox spacing="10">
      <!-- Painel de Busca de Produtos -->
      <VBox spacing="5" style="-fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 5;">
         <Label text="BUSCAR PRODUTO" style="-fx-font-weight: bold;"/>
         <HBox spacing="5">
            <TextField fx:id="txtBuscaProduto" promptText="Código ou Nome"/>
            <Button text="Buscar" onAction="#buscarProduto"/>
         </HBox>

         <TableView fx:id="tabelaProdutos" prefHeight="300">
            <columns>
               <TableColumn text="Código" prefWidth="80">
                  <cellValueFactory><PropertyValueFactory property="id"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Produto" prefWidth="200">
                  <cellValueFactory><PropertyValueFactory property="nome"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Preço" prefWidth="80">
                  <cellValueFactory><PropertyValueFactory property="preco"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Estoque" prefWidth="80">
                  <cellValueFactory><PropertyValueFactory property="quantidade"/></cellValueFactory>
               </TableColumn>
            </columns>
         </TableView>

         <HBox spacing="5" alignment="CENTER_RIGHT">
            <Label text="Quantidade:"/>
            <TextField fx:id="txtQuantidade" prefWidth="50" text="1"/>
            <Button text="Adicionar" onAction="#adicionarItem" style="-fx-base: #4CAF50;"/>
         </HBox>
      </VBox>

      <!-- Painel de Itens da Venda -->
      <VBox spacing="5" style="-fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 5;">
         <Label text="ITENS DA VENDA" style="-fx-font-weight: bold;"/>

         <TableView fx:id="tabelaItens" prefHeight="300">
            <columns>
               <TableColumn text="Código" prefWidth="80">
                  <cellValueFactory><PropertyValueFactory property="idProduto"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Produto" prefWidth="200">
                  <cellValueFactory><PropertyValueFactory property="nomeProduto"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Qtd" prefWidth="50">
                  <cellValueFactory><PropertyValueFactory property="quantidade"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Preço" prefWidth="80">
                  <cellValueFactory><PropertyValueFactory property="precoUnitario"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="Total" prefWidth="100">
                  <cellValueFactory><PropertyValueFactory property="totalItem"/></cellValueFactory>
               </TableColumn>
               <TableColumn text="" prefWidth="50">
                  <cellValueFactory>
                     <PropertyValueFactory property="dummy" />
                  </cellValueFactory>
               </TableColumn>
            </columns>
         </TableView>

         <HBox spacing="10" alignment="CENTER_RIGHT">
            <Label text="Total da Venda:" style="-fx-font-weight: bold;"/>
            <Label fx:id="lblTotalVenda" text="R$ 0,00" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
         </HBox>

         <HBox spacing="5" alignment="CENTER_RIGHT">
            <ComboBox fx:id="cbFormaPagamento" promptText="Forma de Pagamento">
               <items>
                  <FXCollections fx:factory="observableArrayList">
                     <String fx:value="DINHEIRO"/>
                     <String fx:value="CARTAO"/>
                     <String fx:value="CHEQUE"/>
                  </FXCollections>
               </items>
            </ComboBox>
            <Button text="Finalizar Venda" onAction="#finalizarVenda" style="-fx-base: #2196F3; -fx-font-weight: bold;"/>
         </HBox>
      </VBox>
   </HBox>
</VBox>